<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="rascl">
	<link name="world" />

	<joint name="base_link_joint" type="fixed">
		<parent link="world" />
		<child link="base_link" />
		<origin xyz="0 0 0" rpy="0 0 1.5" />
		<axis xyz="0 0 1" />
    <!--limit lower="-3.1415926" upper="0.0" effort="100" velocity="100" /-->
	</joint>

	<link name="base_link">
		<visual>
			<origin xyz="0 0 0" rpy="0 0 0" />
			<geometry>
				<mesh filename="package://rascl_description/meshes/base_link.dae" />
			</geometry>
		</visual>
		<collision>
			<origin xyz="0 0 0" rpy="0 0 0" />
			<geometry>
				<mesh filename="package://rascl_description/meshes/base_link.stl" />
			</geometry>
		</collision>
	</link>

	<joint name="shoulder_joint" type="revolute">
		<parent link="base_link" />
		<child link="shoulder" />
		<origin xyz="0 0 0.057441" rpy="0 0 0" />
		<axis xyz="0 0 -1" />
		<limit lower="-1.9" upper="3.1415926" effort="100" velocity="100" />
	</joint>

	<link name="shoulder">
		<visual>
			<origin xyz="0.0115 0.0059 -0.009" rpy="0 0 0" />
			<geometry>
				<mesh filename="package://rascl_description/meshes/shoulder.dae" />
			</geometry>
		</visual>
    <!-- <collision>
			<origin xyz="0 0 0" rpy="0 0 0" />
			<geometry>
				<mesh filename="package://rascl_description/meshes/shoulder.stl" />
			</geometry>
		</collision>
      -->
	</link>

	<joint name="upperarm_joint" type="revolute">
		<parent link="shoulder" />
		<child link="upperarm" />
		<origin xyz="0 0 0.057441" rpy="0 -1.570796327 0" />
		<axis xyz="0 -1 0" />
		<limit lower="-1.4" upper="1.4" effort="100" velocity="100" />
	</joint>

	<link name="upperarm">
		<visual>
			<origin xyz="0 0 0" rpy="-1.570796327 0 0" />
			<geometry>
				<mesh filename="package://rascl_description/meshes/upperarm.dae" />
			</geometry>
		</visual>
		<collision>
			<origin xyz="0 0 0" rpy="-1.570796327 0 0" />
			<geometry>
				<mesh filename="package://rascl_description/meshes/upperarm.stl" />
			</geometry>
		</collision>
	</link>

	<joint name="lowerarm_joint" type="revolute">
		<parent link="upperarm" />
		<child link="lowerarm" />
		<origin xyz="0.17 0.0215 -0.08" rpy="-3.141592653 1.570796327 0" />
		<axis xyz="0 -1 0" />
    <limit lower="-1.4" upper="1.4" effort="100" velocity="100" />
	</joint>

	<link name="lowerarm">
		<visual>
			<origin xyz="0 0 0" rpy="-1.570796327 0 0" />
			<geometry>
				<mesh filename="package://rascl_description/meshes/lowerarm.dae" />
			</geometry>
		</visual>
		<collision>
			<origin xyz="0 0 0" rpy="-1.570796327 0 0" />
			<geometry>
				<mesh filename="package://rascl_description/meshes/lowerarm.stl" />
			</geometry>
		</collision>
	</link>


	<!-- <joint name="gripper_joint" type="revolute">
		<parent link="lowerarm" />
		<child link="gripper" />
		<origin xyz="0.12 0.019 0" rpy="3.141592653 0 0" />
		<axis xyz="1 0 0" />
		<limit lower="-1.5" upper="0.0" effort="100" velocity="100" />
	</joint>


  <link name="gripper">
      <visual>
          <origin xyz="0.014 0 0" rpy="-1.570796327 0 -1.570796327" />
          <geometry>
              <mesh filename="package://rascl_description/meshes/tool_gripper.dae" />
          </geometry>
      </visual>
      <collision>
          <origin xyz="0.014 0 0" rpy="-1.570796327 0 -1.570796327" />
          <geometry>
              <mesh filename="package://rascl_description/meshes/tool_gripper.stl" />
          </geometry>
      </collision>
  </link> -->

  

	<joint name="gripper_joint" type="revolute">
		<parent link="lowerarm" />
		<child link="gripper_rotary" />
		<origin xyz="0.135 0.019 0" rpy="3.141592653 0 0" />
		<axis xyz="-1 0 0" />
		<limit lower="-1.1519" upper="1.3" effort="100" velocity="100" />
	</joint>

	<joint name="gripper_base_joint" type="fixed">
		<parent link="lowerarm" />
		<child link="gripper_base" />
		<origin xyz="0.116 0.019 0" rpy="1.570796327 0 0" />
		<axis xyz="1 0 0" />
	</joint>


	<link name="gripper_rotary">
		<visual>
			<origin xyz="0.014 0 0" rpy="-1.570796327 3.141592653 -1.570796327" />
			<geometry>
				<mesh filename="package://rascl_description/meshes/middle_rotary.dae" />
			</geometry>
		</visual>
		<collision>
			<origin xyz="0.014 0 0" rpy="-1.570796327 3.141592653 -1.570796327" />
			<geometry>
				<mesh filename="package://rascl_description/meshes/middle_rotary.stl" />
			</geometry>
		</collision>
	</link>

	<link name="gripper_base">
		<visual>
			<origin xyz="0.014 0 0" rpy="-1.570796327 0 -1.570796327" />
			<geometry>
				<mesh filename="package://rascl_description/meshes/gripper_base.dae" />
			</geometry>
		</visual>
		<!-- <collision>
			<origin xyz="0.014 0 0" rpy="-1.570796327 0 -1.570796327" />
			<geometry>
				<mesh filename="package://rascl_description/meshes/gripper_base_col.stl" />
			</geometry>
		</collision> -->
	</link>
	

	<joint name="yaw_right" type="prismatic">
		<mimic joint="gripper_joint" multiplier="0.01" offset="0" />
		<parent link="gripper_base" />
		<child link="gripper_yaw_right" />
		<axis xyz="0 0 1" />
		<origin xyz="0 0 0" rpy="0.0 0.0 0.0" />
		<limit lower="-0.0025" upper="0.03" effort="100" velocity="100" />
	</joint>
	<joint name="yaw_left" type="prismatic">
		<mimic joint="gripper_joint" multiplier="0.01" offset="0" />
		<parent link="gripper_base" />
		<child link="gripper_yaw_left" />
		<axis xyz="0 0 1" />
		<origin xyz="0 0 0" rpy="3.141592653 0.0 0.0" />
		<limit lower="-0.0025" upper="0.03" effort="100" velocity="100" />
	</joint>
  
	<link name="gripper_yaw_left">
		<visual>
			<origin xyz="0.045 0 -0.037" rpy="-1.570796327 0 -1.570796327" />
			<geometry>
				<mesh filename="package://rascl_description/meshes/yaw.dae" />
			</geometry>
		</visual>
		<collision>
			<origin xyz="0.045 0 -0.037" rpy="-1.570796327 0 -1.570796327" />
			<geometry>
				<mesh filename="package://rascl_description/meshes/yaw.stl" />
			</geometry>
		</collision>
	</link>
	<link name="gripper_yaw_right">
		<visual>
			<origin xyz="0.045 0 -0.037" rpy="-1.570796327 0 -1.570796327" />
			<geometry>
				<mesh filename="package://rascl_description/meshes/yaw.dae" />
			</geometry>
		</visual>
		<collision>
			<origin xyz="0.045 0 -0.037" rpy="-1.570796327 0 -1.570796327" />
			<geometry>
				<mesh filename="package://rascl_description/meshes/yaw.stl" />
			</geometry>
		</collision>e
	</link>

	<joint name="tcp" type="fixed">
  		<parent link="gripper_base"/>
  		<child link="tcp_link"/>
  		<origin xyz="0.05 0.0 -0.00" rpy="0 0 0"/>
  	</joint>

  	<link name="tcp_link">
		<visual>
			<geometry>
			<sphere radius="0.002"/> 
			</geometry>
			<material name="red">
			<color rgba="1 0 0 1"/>
			</material>
		</visual>
	</link>
	

	<ros2_control name="rascl_hardware_interface" type="system">
		<hardware>
			<plugin>rascl_hardware_interface/RASCL_HI</plugin>
			<param name="use_fake_hardware">false</param>
			<!-- minimal simulation, input equals output -->
			<param name="adapter">enx00e04c1c1328</param>
			<!-- interface name of ethernet usb dongle, standard en0, can be obtained with terminal command 'ifconfig' -->
		</hardware>
		<joint name="shoulder_joint">
			<command_interface name="position">
				<!-- interface for position control -->
				<param name="min">-1.9</param>
				<param name="max">3.1415926</param>
				<param name="initial_value">0.0</param>
			</command_interface>
			<state_interface name="position" />
		</joint>
    <joint name="upperarm_joint">
      <command_interface name="position">
        <param name="min">-1.4</param>
        <param name="max">1.4</param>
        <param name="initial_value">0.0</param>
      </command_interface>
      <state_interface name="position" />
    </joint>
    <joint name="lowerarm_joint">
      <command_interface name="position">
        <param name="min">-1.4</param>
        <param name="max">1.4</param>
        <param name="initial_value">0.0</param>
      </command_interface>
      <state_interface name="position" />
    </joint>
    <!-- ToDo: implement mimic joints for gripper -->
    <joint name="gripper_joint">
      <command_interface name="position">
        <!-- <param name="min">-1.5</param>
        <param name="max">0.0</param> -->
		<param name="min">-1.5</param>
        <param name="max">0.0</param>
        <param name="initial_value">0.0</param>
      </command_interface>
      <state_interface name="position" />
    </joint>

	</ros2_control>
</robot>